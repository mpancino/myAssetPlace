# PDD v1.12 \- Requirement-to-Build-Phase Mapping

This document maps each requirement ID (`[REQ-XXX]`) from PDD v1.12 to a suggested build phase, based on the 10-phase build order previously outlined (`pdd_build_order`). This indicates the general order and grouping for implementation.

**Note:** Requirements related to overall principles or specifications often apply across multiple phases but are listed where they are first significantly actioned or defined.

---

**Phase 0: Project Setup & Core Infrastructure**

* `[REQ-252]` Framework: React (latest stable version) with TypeScript.  
* `[REQ-258]` UI Components: `shadcn/ui` built on Radix UI and styled with TailwindCSS.  
* `[REQ-261]` Image Handling: Need strategy for handling administrator-uploaded images...  
* `[REQ-262]` Directory Structure: Organize components logically...  
* `[REQ-281]` Framework: Node.js with Express.js and TypeScript.  
* `[REQ-282]` API Style: RESTful API following standard conventions...  
* `[REQ-292]` Database: PostgreSQL (latest stable version).  
* `[REQ-293]` ORM/Query Builder: Drizzle ORM...  
* `[REQ-294]` Schema Management: Define the database schema using Drizzle schema files.  
* `[REQ-298]` Migrations: Use Drizzle Kit...  
* `[REQ-385]` Calculation Test Suite: Develop a comprehensive suite of unit tests... (Setup testing framework)  
* `[REQ-387]` Component & API Testing: Implement standard unit and integration tests... (Setup testing framework)

**Phase 1: Authentication & User Foundation**

* `[REQ-002]` The application's user interface (UI) must be modern, elegant, and intuitive... (Initial application)  
* `[REQ-013]` The application should work seamlessly on desktop, tablet, and mobile devices... (Initial layout)  
* `[REQ-018]` User creates an account (email/password...) via the login screen...  
* `[REQ-019]` User completes a basic profile including country.  
* `[REQ-027]` A persistent "+" sign on the UI allows the user to easily add another asset... (Part of basic layout)  
* `[REQ-042]` User can manage their Account Details (profile information, password).  
* `[REQ-090]` Account Creation: Secure email/password registration with email verification and input validation.  
* `[REQ-092]` Session Management: Secure session handling using industry best practices...  
* `[REQ-093]` Profile Management: Users can view and edit their profile information...  
* `[REQ-094]` Security Features: Enforce password strength requirements, securely hash and salt stored credentials.  
* `[REQ-095]` Route Protection: All application features and data require user authentication.  
* `[REQ-096]` Data Isolation: Users must only be able to access and modify their own financial data...  
* `[REQ-097]` API Security: All API requests must be properly authenticated and authorized.  
* `[REQ-215]` UI Framework: React with shadcn/ui components. (Used here)  
* `[REQ-216]` Styling: TailwindCSS. (Used here)  
* `[REQ-217]` Form Controls: Standardized inputs, selects, checkboxes, radios... (Used in Auth forms)  
* `[REQ-221]` Modals: Consistent modal design... (Potentially used for auth messages)  
* `[REQ-222]` Icons: Utilize a consistent icon library... (Used in UI)  
* `[REQ-223]` Desktop Layout: Consider a 2 or 3-column layout...  
* `[REQ-224]` Tablet Layout: Adapt to a 1 or 2-column layout...  
* `[REQ-225]` Mobile Layout: Single-column layout...  
* `[REQ-226]` Primary Navigation: Use a persistent sidebar...  
* `[REQ-229]` Breadcrumbs: Implement breadcrumbs...  
* `[REQ-230]` Quick Actions: Consider a Floating Action Button (FAB)...  
* `[REQ-237]` Login Screen (including configurable splash text/image area) (Basic structure)  
* `[REQ-248]` Settings Pages: User Profile... (Basic profile part)  
* `[REQ-250]` Onboarding Flow Screens: Welcome, profile setup... (Basic profile part)  
* `[REQ-253]` Global UI State: React Context or Zustand... (For auth state)  
* `[REQ-255]` Local/Feature State: Component state...  
* `[REQ-256]` Routing: `wouter` or `react-router-dom`... (Implementation)  
* `[REQ-257]` Form Handling: `react-hook-form` with `Zod`... (Used in Auth forms)  
* `[REQ-260]` API Client: Custom `fetch` wrapper or `axios` instance... (Implementation)  
* `[REQ-263]` Page Components: Top-level components... (Login, Register, Profile pages)  
* `[REQ-264]` UI Components: Generic, reusable UI elements... (Buttons, Inputs used)  
* `[REQ-265]` Layout Components: Components defining the overall page structure... (Implementation)  
* `[REQ-267]` Form Components: Reusable form structures... (For Auth)  
* `[REQ-273]` Form State: Manage form state using `react-hook-form`.  
* `[REQ-275]` Settings State: Manage user-specific application settings... (Profile part)  
* `[REQ-276]` Implement client-side input validation using `Zod`... (For Auth forms)  
* `[REQ-277]` Ensure type checking for all form fields.  
* `[REQ-279]` Implement comprehensive console logging during development... (Start using)  
* `[REQ-280]` Ensure logs can be easily enabled/disabled for production builds.  
* `[REQ-283]` Authentication: Implement secure session-based authentication... (Password part)  
* `[REQ-284]` Validation: Use `Zod` for validating incoming request bodies... (For Auth endpoints)  
* `[REQ-285]` Error Handling: Implement centralized error handling middleware...  
* `[REQ-286]` Authorization: Endpoints... must include authorization checks... (Basic auth check)  
* `[REQ-287]` Data access endpoints must enforce ownership/tenancy rules. (Basic check)  
* `[REQ-295]` The schema must enforce referential integrity... (For User table)  
* `[REQ-296]` Data Access Layer: Implement a clear data access layer... (For User/Session)  
* `[REQ-299]` Transaction Management: Critical operations... must be wrapped in database transactions... (Apply to registration if needed)  
* `[REQ-301]` User Preference: Store the user's preferred mode... (Schema setup)  
* `[REQ-309]` Authentication: Securely hash and salt passwords (e.g., using `bcrypt`)...  
* `[REQ-310]` Session Management: Use secure, HTTP-only cookies...  
* `[REQ-311]` Implement CSRF (Cross-Site Request Forgery) protection...  
* `[REQ-312]` Set appropriate cookie flags (Secure, SameSite).  
* `[REQ-313]` Authorization: Implement middleware to check user permissions... (Basic auth check)  
* `[REQ-314]` Ensure users can only access their own data (tenant isolation).  
* `[REQ-317]` Input Validation: Enforce strict server-side validation... (For Auth)  
* `[REQ-318]` Error Handling: Return generic error messages in production...  
* `[REQ-321]` Rate Limiting & Security Headers: Implement rate limiting on sensitive endpoints (login, registration...)...  
* `[REQ-346]` The authentication system utilizes a server-side session approach...  
* `[REQ-348]` React Frontend: Handles user interface elements... (Auth parts)  
* `[REQ-349]` Express.js Backend API: Manages authentication logic... (Password part)  
* `[REQ-350]` PostgreSQL Database: Stores user profiles, securely hashed passwords...  
* `[REQ-351]` Passport.js: Middleware orchestrating authentication strategies (`passport-local`...).  
* `[REQ-352]` `express-session`: Middleware managing session creation...  
* `[REQ-355]` `bcrypt`: Library for hashing and comparing passwords securely.  
* `[REQ-356]` CSRF Protection Middleware...  
* `[REQ-357]` Registration: Frontend sends email/password \-\> Backend validates...  
* `[REQ-358]` Login: Frontend sends email/password \-\> Backend uses `passport-local`...  
* `[REQ-364]` Cookie: `express-session` sends a secure, HttpOnly, SameSite session ID cookie...  
* `[REQ-365]` Storage: Session data... is stored server-side... Avoid MemoryStore...  
* `[REQ-366]` Authenticated Requests: Frontend automatically includes the session cookie...  
* `[REQ-367]` CSRF Protection: Middleware generates and validates CSRF tokens...  
* `[REQ-368]` Logout Flow: Frontend requests logout endpoint \-\> Backend calls `req.logOut()`...  
* `[REQ-369]` Password hashing (`bcrypt`).  
* `[REQ-370]` HTTPS enforced. (Server config)  
* `[REQ-371]` Secure cookie attributes (HttpOnly, Secure, SameSite).  
* `[REQ-372]` CSRF protection implemented.  
* `[REQ-374]` Input validation (Zod).  
* `[REQ-375]` Rate limiting on authentication endpoints.  
* `[REQ-376]` Use of persistent session store.

**Phase 2: Admin Configuration Basics & Core Models**

* `[REQ-005]` The application will also allow for basic branding customization... (Splash Screen)  
* `[REQ-017]` The system also allows administrator-level UI customization (e.g., login screen).  
* `[REQ-020]` The country setting will determine the default tax settings (based on administrator configuration...)... APIs, all configurable by the administrator.  
* `[REQ-050]` Administrator can configure country-specific settings...  
* `[REQ-051]` Default Currency  
* `[REQ-052]` Financial Year End Date  
* `[REQ-053]` Available external APIs...  
* `[REQ-054]` Administrator can add and manage Asset Holding Types.  
* `[REQ-055]` Initial types include: Personal, Superannuation..., Family Trust.  
* `[REQ-056]` For each Holding Type, the administrator can set the specific tax rules and parameters.  
* `[REQ-057]` This configurability by the administrator is essential...  
* `[REQ-058]` The country or region where it is applicable.  
* `[REQ-059]` Income tax rates and brackets specific to that holding type. (Basic structure/fields)  
* `[REQ-060]` Capital gains tax rates and rules specific to that holding type. (Basic structure/fields)  
* `[REQ-061]` Any specific expenses associated with managing assets under that holding type.  
* `[REQ-063]` For each Asset Class, the administrator can configure:  
* `[REQ-064]` Default low, medium, and high growth rate assumptions...  
* `[REQ-065]` Relevant expense categories...  
* `[REQ-066]` Default income assumptions...  
* `[REQ-067]` Administrator can create default settings for Asset Holding Types and Asset Classes...  
* `[REQ-068]` Administrator can securely input and manage API keys...  
* `[REQ-069]` A subscription plan can be configured by the administrator...  
* `[REQ-070]` The number of allowed Asset Holding Types.  
* `[REQ-071]` The number of allowed Asset Classes.  
* `[REQ-072]` The number of Assets permitted within each Asset Class.  
* `[REQ-073]` Access to specific third-party API integrations...  
* `[REQ-074]` Allowed User Interface Modes...  
* `[REQ-075]` The maximum number of years for financial projections.  
* `[REQ-076]` Subscriptions can be configured with specific durations...  
* `[REQ-087]` A default free or minimum-tier subscription plan must always be configured...  
* `[REQ-088]` Administrator can define the cost for each subscription tier...  
* `[REQ-089]` Administrator can configure the text content and upload/select an image... (Login Splash)  
* `[REQ-098]` Tax Bracket Configuration: Administrator can set up income tax brackets... (Basic structure)  
* `[REQ-099]` Capital Gains Tax: Administrator can configure capital gains tax rates... (Basic structure)  
* `[REQ-100]` Dividend Tax: Administrator can set dividend tax rates... (Basic structure)  
* `[REQ-192]` The application login screen shall display a designated area containing text and an image. (Display logic)  
* `[REQ-193]` The specific text content and the image displayed must be configurable...  
* `[REQ-251]` Administrator Console Screens: Country config, Holding Type config..., Asset Class config, Subscription config..., API Key Management, Login Splash Screen Config. (Basic UI)  
* `[REQ-288]` Admin-only endpoints must check for administrator role/permissions. (Implementation)  
* `[REQ-289]` Subscription Info Endpoint: An endpoint is needed to provide the frontend with the current user's subscription details... (Basic version)  
* `[REQ-290]` Endpoint required for frontend to retrieve current login splash screen configuration...  
* `[REQ-291]` Endpoints required for administrator to manage login splash screen text and image...  
* `[REQ-302]` Admin Defaults & Settings: Ensure administrator-configurable defaults... and settings are stored efficiently...  
* `[REQ-303]` Tax parameters need to be structured per Country and Holding Type. (Basic structure)  
* `[REQ-304]` Database needs fields/tables to store administrator-configured settings, including login splash screen...  
* `[REQ-305]` Subscription Plan Schema: The table defining subscription plans must include fields indicating allowed modes... and limits...  
* `[REQ-306]` User Subscription Record: The table linking users to their active subscription plan...  
* `[REQ-308]` Image Storage: Need strategy for storing administrator-uploaded images... (Decision/Setup)  
* `[REQ-316]` Implement administrator role checks.  
* `[REQ-319]` Database Encryption: Sensitive user data stored... (e.g., API keys)... should be encrypted... (Consider implementation)  
* `[REQ-339]` Cloud Storage (for Images): Integrate with a cloud storage provider... (Setup/Config)

**Phase 3: Core Asset Management (Vertical Slice 1 \- e.g., Cash Accounts & Loans)**

* `[REQ-029]` User navigates to a specific asset class...  
* `[REQ-030]` User views a summary of existing assets... or grouped by Asset Holding Type.  
* `[REQ-031]` User can explore the details of each individual asset.  
* `[REQ-032]` User can configure, edit, or delete asset-specific details...  
* `[REQ-035]` User views updated financial metrics...  
* `[REQ-103]` Overview and Management: Each Asset Class page must provide an overview/summary... add, edit, and delete assets...  
* `[REQ-134]` Account Management: Add, edit, delete bank accounts... (Cash)  
* `[REQ-135]` Balance Tracking: Track current and historical balances. (Cash)  
* `[REQ-136]` Interest Management: Allow users to input interest rates... (Cash)  
* `[REQ-137]` Offset Functionality: Designate cash accounts that can be linked... to loans...  
* `[REQ-138]` Liquidity Analysis: Tag accounts for specific purposes... (Cash)  
* `[REQ-139]` Holding Type Classification: Assign cash accounts...  
* `[REQ-140]` Individual Asset Growth Rate: ...allow setting an interest rate. (Cash)  
* `[REQ-155]` Loan Management: Add, edit, delete various loan types...  
* `[REQ-156]` Loan Details: Track lender, initial amount, interest rate, term...  
* `[REQ-157]` Balance Tracking: Calculate and track the outstanding loan balance...  
* `[REQ-158]` Offset Account Integration: Ability to link a Cash Account... against a loan...  
* `[REQ-159]` Holding Type Classification: Assign loans...  
* `[REQ-174]` Balance Sheet Tab: Display a summary of total assets, total liabilities, and calculated net worth... (Basic version with Cash/Loans)  
* `[REQ-180]` Asset Allocation View: Provide visual breakdowns... (Basic version)  
* `[REQ-181]` Quick Action Buttons: Include prominent buttons... (Add Asset)  
* `[REQ-203]` View Switching: Users must be able to easily switch views between aggregating assets by asset class and holding type... (Implement toggle)  
* `[REQ-218]` Cards: Consistent card design for asset representation.  
* `[REQ-219]` Data Tables: Use shadcn/ui data tables... (For asset lists)  
* `[REQ-243]` Asset Class Landing Pages: Showing asset summaries... add/edit actions.  
* `[REQ-244]` Asset Detail/Edit Wizard (Basic Mode)... (Cash/Loan)  
* `[REQ-245]` Asset Detail/Edit Wizard (Advanced Mode)... (Cash/Loan)  
* `[REQ-266]` Feature Components: Components specific to a particular feature or asset class... (Cash/Loan forms)  
* `[REQ-297]` Queries retrieving assets for calculations... must filter out hidden/disabled assets... (Implement basic filter)  
* `[REQ-307]` Asset Visibility Status: Asset tables need a mechanism to track visibility status... (`is_hidden` flag, `created_at`)  
* `[REQ-340]` Dashboard Integration: All asset class modules must provide aggregated data... (Cash/Loan)

**Phase 4: Core Asset Management (Vertical Slice 2 \- e.g., Real Estate & Mortgages)**

* `[REQ-108]` Property Management: Add, edit, delete property assets...  
* `[REQ-109]` Valuation Tracking: Allow manual entry and tracking...  
* `[REQ-111]` Mortgage Management: Track mortgage details...  
* `[REQ-112]` Calculate principal and interest components of repayments.  
* `[REQ-113]` Expense Tracking: Allow users to log property-related expenses...  
* `[REQ-114]` Rental Income: Track rental income...  
* `[REQ-115]` Offset Account Integration: Ability to link a Cash Account... against a mortgage...  
* `[REQ-116]` No Mortgage Option: Support for properties owned outright...  
* `[REQ-117]` Holding Type Classification: Assign properties...  
* `[REQ-118]` Individual Asset Growth Rate: Allow users to set or override default... growth rate assumptions... (Advanced Mode)  
* `[REQ-119]` Address Validation: Integrate with address validation/geocoding services... (Stubbed)  
* `[REQ-120]` Map Thumbnail: On Real Estate asset overview cards/listings, display a map thumbnail... (Basic display)  
* `[REQ-331]` Integrate with a service like HERE API... (Stubbed)  
* `[REQ-332]` API key management handled by the Administrator. (For HERE API)  
* `[REQ-333]` Provide stubbed/mocked responses if the API key is not configured.

**Phase 5: Expand Core Features & Tax Foundation**

* `[REQ-007]` Complex financial concepts should be presented intuitively. (Applies to Tax UI)  
* `[REQ-011]` Calculations and data sources should be clear and explainable... (Apply to Tax)  
* `[REQ-012]` Tax calculations should clearly state the rates and rules being applied...  
* `[REQ-062]` Example (Australia): For 'Personal' (Australia), configure income tax brackets, Medicare levy... (Implement full config UI)  
* `[REQ-091]` Social Login: Integration with Google OAuth via Firebase Authentication...  
* `[REQ-101]` Holding Type Tax Rules: The system logic must apply the correct tax treatment...  
* `[REQ-102]` Tax Projection: The projection engine must incorporate the relevant administrator-configured tax rules... (Basic logic)  
* `[REQ-150]` Tax Withholding: Estimate Pay-As-You-Go (PAYG) tax withheld...  
* `[REQ-322]` Firebase Authentication: Integrate with Firebase SDK... Backend uses Firebase Admin SDK...  
* `[REQ-347]` It supports both traditional email/password login and social login via Google...  
* `[REQ-353]` Firebase Auth SDK (Client): Used on the frontend...  
* `[REQ-354]` Firebase Admin SDK (Server): Used on the backend...  
* `[REQ-359]` Initiation: Frontend uses Firebase Auth SDK... for Google login.  
* `[REQ-360]` Token Retrieval: Frontend receives Firebase ID Token...  
* `[REQ-361]` Backend Verification: Frontend sends ID Token to backend endpoint...  
* `[REQ-362]` User Linking/Creation: Backend finds user by Firebase UID or email...  
* `[REQ-363]` Session Establishment: Backend calls `req.logIn()`...  
* `[REQ-373]` Server-side verification of social login tokens (Firebase Admin SDK).  
* `[REQ-389]` Financial Year: Administrator must configure the start/end dates...  
* `[REQ-390]` Assessable Income Calculation: Logic required...  
* `[REQ-391]` Income Tax Brackets (Resident): Administrator must configure multiple tiers...  
* `[REQ-392]` Medicare Levy: Administrator must configure...  
* `[REQ-393]` Medicare Levy Surcharge: Administrator must configure...  
* `[REQ-394]` Tax Offsets: Administrator must be able to configure rules...  
* `[REQ-395]` Dividend Imputation: Administrator must configure...  
* `[REQ-396]` Accumulation Phase (Earnings Tax): Administrator must configure...  
* `[REQ-397]` Concessional Contributions Tax: Administrator must configure...  
* `[REQ-398]` Non-Concessional Contributions: Generally 0% tax on entry...  
* `[REQ-399]` Contribution Caps: Administrator must configure...  
* `[REQ-400]` Pension Phase: Administrator must configure...  
* `[REQ-401]` Calculation Logic: Required logic for: Capital Gain...  
* `[REQ-402]` CGT Discount: Administrator must configure...  
* `[REQ-403]` Integration with Income Tax: Logic required to add the discounted Net Capital Gain...  
* `[REQ-404]` Superannuation CGT: Apply relevant tax rate...  
* `[REQ-405]` Exemptions: Logic may need to account for exemptions...

**Phase 6: Additional Asset Classes (Iterative Slices)**

* `[REQ-121]` Stock Portfolio Management: Add, edit, delete stock/ETF investments...  
* `[REQ-122]` Valuation Tracking: Track current and historical values. (Shares)  
* `[REQ-123]` Integrate with stock price APIs... (Stubbed)  
* `[REQ-124]` Dividend Management: Allow users to record received dividends...  
* `[REQ-125]` Performance Metrics: Calculate and display gain/loss... (Shares)  
* `[REQ-126]` Holding Type Classification: Assign shareholdings...  
* `[REQ-127]` Individual Asset Growth Rate: Allow users to set or override default... (Shares \- Advanced Mode)  
* `[REQ-128]` Account Management: Add, edit, delete superannuation/retirement accounts...  
* `[REQ-129]` Balance Tracking: Track current and historical account balances. (Super)  
* `[REQ-130]` Contribution Management: Track employer contributions... (Super)  
* `[REQ-131]` Investment Mix: Allow users to specify the asset allocation... (Super \- Advanced Mode)  
* `[REQ-132]` Fee Analysis: Allow users to input administration and investment fees... (Super \- Advanced Mode)  
* `[REQ-133]` Individual Asset Growth Rate: Allow users to set or override default... (Super \- Advanced Mode)  
* `[REQ-141]` Option Management: Add, edit, delete employee stock options...  
* `[REQ-142]` Vesting Schedule: Track vesting dates... (Options)  
* `[REQ-143]` Valuation: Estimate current and projected values... (Options)  
* `[REQ-144]` Exercise Analysis: Provide basic analysis... (Options)  
* `[REQ-145]` Tax Implications: Estimate potential tax impact upon exercise... (Options \- Advanced Mode)  
* `[REQ-146]` Holding Type Classification: Assign options...  
* `[REQ-147]` Individual Asset Growth Rate: Growth is tied to the underlying stock's performance. (Options)  
* `[REQ-148]` (Salary/Income treated as Personal Asset Class)  
* `[REQ-149]` Employment Income: Track salary, wages, bonuses...  
* `[REQ-151]` Growth Projections: Allow users to model anticipated salary increases...  
* `[REQ-152]` Superannuation Contributions: Automatically calculate mandatory employer contributions...  
* `[REQ-153]` Income Visualization: Display charts showing income breakdown... (In Cashflow Tab later)  
* `[REQ-154]` Expense Tracking: Allow high-level tracking of regular living expenses...  
* `[REQ-323]` Integrate with a free or freemium stock price API... (Stubbed)  
* `[REQ-324]` API key management handled by the Administrator. (Stock API)  
* `[REQ-325]` Provide stubbed/mocked responses... (Stock API)

**Phase 7: Projections & Reporting**

* `[REQ-001]` MyAssetPlace is designed to... generate financial projections.  
* `[REQ-003]` The system adopts a modular architecture... financial logic... (Tested via projections)  
* `[REQ-036]` User selects which asset classes and holding types to include in projections.  
* `[REQ-037]` User views forward-year projections.  
* `[REQ-038]` Basic Mode: Projections run using default scenarios...  
* `[REQ-039]` Advanced Mode: User can select different scenarios... adjust parameters...  
* `[REQ-041]` User can drill down into specific asset class contributions or view projections aggregated by Asset Holding Type...  
* `[REQ-160]` Basic Mode: Projections run using a default scenario... (Projection Settings)  
* `[REQ-161]` Advanced Mode: Allow users to select low, medium, high scenarios... (Projection Settings)  
* `[REQ-162]` Basic Mode: Uses administrator-defined default \[Inflation\]...  
* `[REQ-163]` Advanced Mode: Allow users to set the assumed inflation rate.  
* `[REQ-164]` Asset Class/Holding Type Enablement: ...toggle what's included in projections.  
* `[REQ-166]` Projection Rules: Projections must only ever use data from... visible assets...  
* `[REQ-167]` Projection Period Options: Projections must offer the option to display results...  
* `[REQ-175]` Cashflow Tab: Display a summary of total income, total expenses, and net cash flow...  
* `[REQ-176]` Projections Tab: Display high-level summaries and charts...  
* `[REQ-177]` Include key metrics like projected net worth and cash flow over time.  
* `[REQ-179]` Future Worth Tiles: The dashboard should prominently display tiles... showing the projected future net worth...  
* `[REQ-220]` Charts: Recharts library for data visualization. (Used heavily here)  
* `[REQ-233]` Tab Structure: Implement clear tabs for switching between Balance Sheet, Cashflow, and Projections views...  
* `[REQ-246]` Basic Mode Projection Screen: Minimal configuration...  
* `[REQ-247]` Advanced Mode Projection Setup & Results: Full configuration options...  
* `[REQ-341]` Projection System: The projection engine must be able to query data... and apply configured growth rates, contributions, expenses, and tax rules.  
* `[REQ-342]` Cashflow System: Income... and expenses... must feed into the cashflow calculation service.

**Phase 8: Subscription Enforcement & Advanced Features**

* `[REQ-004]` It aims to be accessible... through adaptable interface modes, the availability of which can be tied to subscription plans.  
* `[REQ-006]` MyAssetPlace is a subscription service... utilize different... number of Assets, access to interface modes... based on... subscription plans...  
* `[REQ-008]` Offer distinct modes (**Basic Mode** and **Advanced Mode**)...  
* `[REQ-009]` Access to these modes can be determined by the user's subscription plan.  
* `[REQ-014]` Users with access to Advanced Mode should be able to configure the system...  
* `[REQ-015]` Basic Mode users rely more on administrator-defined defaults.  
* `[REQ-016]` These defaults serve as starting points and are always overridable in Advanced Mode.  
* `[REQ-021]` User selects or is assigned a subscription plan...  
* `[REQ-022]` The user's initial interface mode... is determined by the permissions of their active subscription plan.  
* `[REQ-023]` If the plan allows both, the system might default to Basic or prompt the user.  
* `[REQ-033]` Basic Mode: The wizard hides advanced fields...  
* `[REQ-034]` Advanced Mode: The wizard exposes all relevant fields...  
* `[REQ-040]` The maximum number of projection years is configurable based on their subscription plan...  
* `[REQ-043]` User can manage their subscription plan...  
* `[REQ-044]` This includes upgrading/downgrading plans, which may affect available modes and asset limits.  
* `[REQ-045]` User can export their data... in a structured **JSON** format and import previously exported data.  
* `[REQ-048]` User can switch between **Basic Mode** and **Advanced Mode**... **only if their current subscription plan permits...**  
* `[REQ-049]` If the plan allows only one mode, this toggle should be hidden or disabled.  
* `[REQ-077]` If a user attempts an action exceeding their current subscription limits... they will be prompted to upgrade...  
* `[REQ-078]` If a subscription expires, the user might be reverted to a default free tier...  
* `[REQ-079]` If a user downgrades to a plan that restricts their current mode... the system must gracefully switch them...  
* `[REQ-080]` They will be notified of this change.  
* `[REQ-081]` Asset limits will also be enforced...  
* `[REQ-082]` Users will be consistently prompted to renew...  
* `[REQ-083]` Assets will **never** be deleted automatically...  
* `[REQ-084]` Assets exceeding the limits... will become hidden/disabled based on a **Last-In, First-Out (LIFO)** principle...  
* `[REQ-085]` **Hidden/disabled assets are completely excluded from all application calculations...**  
* `[REQ-086]` Features associated with a mode... might become hidden if the user loses access...  
* `[REQ-178]` The maximum projection period (X) is determined by the user's subscription plan.  
* `[REQ-186]` Data Export: Allow users to export... **JSON** file.  
* `[REQ-187]` Data Import: Allow users to import... **JSON** file.  
* `[REQ-188]` Implement robust validation... (Import)  
* `[REQ-189]` Asset limits based on the current subscription must be enforced during import.  
* `[REQ-190]` Backup Reminder: Optionally prompt users periodically...  
* `[REQ-191]` Import Verification: Provide feedback to the user...  
* `[REQ-195]` Subscription-Based Access: The UI must reflect the mode(s) allowed...  
* `[REQ-238]` Mode Toggle (Settings): Appearance when enabled..., disabled/hidden...  
* `[REQ-239]` Subscription Plan Selection/Management: Clearly indicating which modes and limits...  
* `[REQ-240]` Upgrade Prompts: Specifically mentioning mode access or asset limits...  
* `[REQ-268]` Conditional Rendering: Components will need to implement conditional rendering logic based on the allowed modes...  
* `[REQ-270]` Global UI State: Needs to store: Allowed modes based on the current subscription...  
* `[REQ-278]` Validation rules might differ slightly based on mode...  
* `[REQ-315]` Check subscription permissions for feature access.  
* `[REQ-326]` Access controlled by user subscription level. (Stock API)  
* `[REQ-330]` Access controlled by user subscription level. (Property API)  
* `[REQ-336]` Access controlled by user subscription level and user toggle (3.4.1). (OpenAI)  
* `[REQ-388]` Subscription/Mode Coverage: Test cases must cover scenarios where mode access and asset visibility are restricted...

**Phase 9: Supporting Modules & Live Integrations**

* `[REQ-010]` Despite the modular architecture... application should provide a unified and consistent experience... (Refinement)  
* `[REQ-024]` User is guided to add their first asset through an onboarding wizard... (Refine flow)  
* `[REQ-025]` User is introduced to the dashboard... with sample data visualizations. (Refine)  
* `[REQ-026]` User is prompted to explore other asset classes. (Refine)  
* `[REQ-046]` User can customize the UI appearance (e.g., select different themes/skins).  
* `[REQ-047]` User can configure notification preferences...  
* `[REQ-110]` Integrate with property valuation APIs... (Live)  
* `[REQ-123]` Integrate with stock price APIs... (Live)  
* `[REQ-165]` Financial Insights Toggle: Allow users to enable or disable optional AI-powered financial insights...  
* `[REQ-168]` Forum Functionality: Implement a message board feature...  
* `[REQ-169]` Admin-Defined Threads: The administrator must be able to create and manage discussion categories/threads...  
* `[REQ-170]` User Profiles: Users must be able to create a unique nickname and select/upload an avatar... (Forum)  
* `[REQ-171]` Moderation: Basic moderation tools for the administrator... (Forum)  
* `[REQ-182]` Activity Log: Maintain a log of significant user actions...  
* `[REQ-183]` Filtering: Allow users to filter the activity log...  
* `[REQ-184]` Detail View: Provide the ability to view specific details related to each logged activity.  
* `[REQ-185]` Timeline Visualization: Optionally display activities...  
* `[REQ-207]` Embedded Help: Link to help articles/FAQs...  
* `[REQ-249]` Community Forum (NoAdviceBoard): Thread list, post view, user profile/avatar display. (UI)  
* `[REQ-327]` API key management handled by the Administrator. (Property API)  
* `[REQ-328]` Provide stubbed/mocked responses... (Property API)  
* `[REQ-331]` Integrate with a service like HERE API... (Live)  
* `[REQ-334]` Integrate with OpenAI API... Feature scope needs further definition.  
* `[REQ-335]` API key management handled by the Administrator. (OpenAI)  
* `[REQ-337]` Provide stubbed/mocked responses... (OpenAI)  
* `[REQ-338]` Payment Gateway: Integrate with a payment provider...  
* `[REQ-343]` Activity Logging: Backend services... must trigger events or directly write entries...  
* `[REQ-344]` Hiding/unhiding assets... should also be logged.  
* `[REQ-345]` Administrator changes to configuration... should be logged.

**Phase 10: Finalization & Polish**

* `[REQ-028]` Demo User Onboarding: When the demo user first logs in... (Final check)  
* `[REQ-208]` Clear CTAs: Guide users on the next logical step. (Review/Refine)  
* `[REQ-209]` Core to Basic Mode: Defaults are automatically applied... (Verify)  
* `[REQ-210]` Overrides in Advanced: Advanced Mode allows users to override... (Verify)  
* `[REQ-211]` Basic Mode users rely more on administrator-defined defaults. (Verify experience)  
* `[REQ-212]` Utilize simple dialogs, wizards, and step-by-step flows... (Review/Refine)  
* `[REQ-213]` Wizards should adapt to the current mode. (Verify)  
* `[REQ-214]` Design key UI components... to be adaptable... (Review/Refine)  
* `[REQ-377]` Creation: Implement functionality... to create a pre-populated demo user account. (Finalize/Script)  
* `[REQ-378]` Test Data: The demo account must contain a diverse range... (Finalize)  
* `[REQ-379]` Subscription Scenarios: Consider having multiple demo users... (Finalize)  
* `[REQ-380]` Onboarding: Ensure the specific demo user onboarding flow... is triggered...  
* `[REQ-381]` Login Button: During development and testing phases, include a clearly marked "Administrator Login" button...  
* `[REQ-382]` This must be disabled or removed in production builds.  
* `[REQ-383]` Demo Button: Similarly, provide a "Demo Login" button...  
* `[REQ-384]` This must be disabled or removed in production builds.  
* `[REQ-386]` Test Report Generation: Implement functionality, accessible via the Settings page (or an admin panel), to run this calculation test suite and generate a report...  
* *(Placeholder Sections 7 & 8 \- Deployment/Future Considerations would be addressed here)*  
* *(Placeholder Section 9.1-9.3 \- Glossary, Wireframes, API Specs finalized here)*

---

